(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{c689:function(o,t,r){"use strict";r.r(t);var a=function(){var o=this,t=o.$createElement,r=o._self._c||t;return r("div",[r("bodyTabs",{attrs:{titulo:"Protocolo de Entrada"}},[r("template",{slot:"tabHeader"},[r("q-tab",{attrs:{name:"tab-1",icon:"folder_shared",label:"Cadastro"}})],1),r("template",{slot:"tabPanel"},[r("q-tab-panel",{attrs:{name:"tab-1"}},[r("form",{on:{submit:function(t){return t.preventDefault(),o.salvarAlterar(t)}}},[r("div",{staticClass:"row barraBotoes"},[r("div",{staticClass:"col-md-6 linhaBotoes"},[o.possoGravarProtocoloEntrada?r("q-btn",{attrs:{small:"",type:"reset",icon:"add"},on:{click:o.reset}},[o._v("Novo")]):o._e(),!o.protocoloEntrada.protocoloEntrada&&o.possoGravarProtocoloEntrada?r("q-btn",{attrs:{small:"",type:"submit",icon:"save"}},[o._v("Gravar")]):o._e(),o.protocoloEntrada.protocoloEntrada&&o.possoAlterarProtocoloEntrada?r("q-btn",{attrs:{small:"",type:"submit",icon:"save"}},[o._v("Alterar")]):o._e(),o.possoExcluirProtocoloEntrada?r("q-btn",{attrs:{small:"",type:"button",icon:"delete"},on:{click:o.excluir}},[o._v("Excluir")]):o._e()],1),r("div",{staticClass:"col-md-6"},[o.protocoloEntrada.protocoloEntrada?r("q-btn",{attrs:{small:"",type:"button",icon:"autorenew"},on:{click:o.preparaDocSemelhante}},[o._v("Gravar Doc Semelhante")]):o._e()],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-2"},[r("q-field",{staticClass:"form-input",attrs:{label:"Nº","stack-label":""}},[o._v("\n                "+o._s(o.protocoloEntrada.anoCadastro+"-"+o.protocoloEntrada.protocolo)+"\n              ")])],1),r("div",{staticClass:"col-md-4"},[r("form-select",{attrs:{label:"Tipo de Documento",error:o.$v.protocoloEntrada.tipoDocumento.$error,"error-message":"Obrigatório",classe:"form-input",hint:"Obrigatório",options:o.optionsTipoDocumento,required:""},on:{input:function(t){return o.$v.protocoloEntrada.tipoDocumento.$touch()}},model:{value:o.protocoloEntrada.tipoDocumento,callback:function(t){o.$set(o.protocoloEntrada,"tipoDocumento",t)},expression:"protocoloEntrada.tipoDocumento"}}),r("q-linear-progress",{directives:[{name:"show",rawName:"v-show",value:o.optionsLoading,expression:"optionsLoading"}],attrs:{indeterminate:""}})],1),r("div",{staticClass:"col-md-3"},[r("q-input",{staticClass:"form-input",attrs:{label:"Número",hint:"Obrigatório",error:o.$v.protocoloEntrada.numero.$error,"error-message":"Obrigatório",autocomplete:"off",type:"text",name:"number"},on:{input:function(t){return o.$v.protocoloEntrada.numero.$touch()}},model:{value:o.protocoloEntrada.numero,callback:function(t){o.$set(o.protocoloEntrada,"numero",t)},expression:"protocoloEntrada.numero"}})],1),r("div",{staticClass:"col-md-3"},[r("q-input",{staticClass:"form-input",attrs:{label:"Data do documento",hint:"Obrigatório","stack-label":"",error:o.$v.protocoloEntrada.dataDocumento.$error,"error-message":"Obrigatório",autocomplete:"off",type:"date",name:"data"},model:{value:o.protocoloEntrada.dataDocumento,callback:function(t){o.$set(o.protocoloEntrada,"dataDocumento",t)},expression:"protocoloEntrada.dataDocumento"}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("q-input",{staticClass:"form-input",attrs:{label:"Assunto",hint:"Obrigatório",error:o.$v.protocoloEntrada.assunto.$error,"error-message":"Obrigatório",autocomplete:"on",type:"text",name:"assunto"},on:{input:function(t){return o.$v.protocoloEntrada.assunto.$touch()},change:o.sugereDestino},model:{value:o.protocoloEntrada.assunto,callback:function(t){o.$set(o.protocoloEntrada,"assunto",t)},expression:"protocoloEntrada.assunto"}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("q-input",{staticClass:"form-input",attrs:{label:"Origem",hint:"Obrigatório",error:o.$v.protocoloEntrada.origem.$error,"error-message":"Obrigatório",autocomplete:"on",type:"text",name:"origem"},model:{value:o.protocoloEntrada.origem,callback:function(t){o.$set(o.protocoloEntrada,"origem",t)},expression:"protocoloEntrada.origem"}})],1),r("div",{staticClass:"col-md-6"},[r("form-select",{staticClass:"form-input",attrs:{error:o.$v.protocoloEntrada.setor.$error,"error-message":"Obrigatório",hint:"Obrigatório",classe:"form-input",label:"Destino",options:o.optionsSetor,required:""},on:{input:function(t){return o.$v.protocoloEntrada.setor.$touch()}},model:{value:o.protocoloEntrada.setor,callback:function(t){o.$set(o.protocoloEntrada,"setor",t)},expression:"protocoloEntrada.setor"}},[r("template",{slot:"embutir"},[r("q-popup-proxy",[r("q-banner",{attrs:{cliclable:""},on:{click:function(t){o.protocoloEntrada.setor=o.destino.setor}}},[o._v("\n                      Sugiro selecionar: "+o._s(o.destino.codigo)+".\n                    ")])],1)],1)],2),r("q-linear-progress",{directives:[{name:"show",rawName:"v-show",value:o.optionsLoading,expression:"optionsLoading"}],attrs:{indeterminate:""}})],1)])])])],1)],2),r("lista-de-registros")],1)},e=[],n=(r("f751"),r("bbff")),s=function(){var o=this,t=o.$createElement,r=o._self._c||t;return r("lista-de-registros",{ref:"listaDeRegistros",attrs:{labelHeader:"Documentos"},on:{atualizaLista:o.atualizaLista}},[r("template",{slot:"qItem"},o._l(o.getRegistros,(function(t,a){return r("q-item",{key:a,staticClass:"item-lista",class:a%2?"bg-blue-grey-1":"bg-blue-grey-2",attrs:{multiline:"",item:"",to:{name:"alterarProtocoloEntrada",params:{id:t.protocoloEntrada}},exact:""}},[r("q-item-section",[r("q-item-label",[o._v(" "+o._s(t.dataDocumento+" | "+t.origem))]),r("q-item-label",{attrs:{caption:"",lines:"2"}},[o._v(o._s(t.tipoDocumentoDescricao+" "+t.numero+" | "+t.assunto)+" ")])],1)],1)})),1)],2)},i=[],c=(r("8e6e"),r("8a81"),r("ac6a"),r("cadf"),r("06db"),r("456d"),r("9523")),l=r.n(c),u=r("2f62"),d=r("dbcf"),p=r("0da6"),m=(r("6b54"),r("2397"),r("970b")),f=r.n(m),E=r("5bc3"),g=r.n(E),h=r("ed6d"),v=r.n(h),b=r("6b58"),D=r.n(b),$=r("36c6"),y=r.n($),q=r("5c12");function w(o){var t=O();return function(){var r,a=y()(o);if(t){var e=y()(this).constructor;r=Reflect.construct(a,arguments,e)}else r=a.apply(this,arguments);return D()(this,r)}}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(o){return!1}}var C=function(o){v()(r,o);var t=w(r);function r(){return f()(this,r),t.apply(this,arguments)}return g()(r,null,[{key:"procura",value:function(o,t,r){return this.get("protocoloentradas",{params:{busca:o,inicio:t,fim:r}})}},{key:"grava",value:function(o){return this.post("protocoloentradas/protocoloentrada",o)}},{key:"altera",value:function(o){return this.put("protocoloentradas/protocoloentrada/".concat(o.protocoloentrada),o)}},{key:"apaga",value:function(o){return this.delete("protocoloentradas/protocoloentrada/".concat(o))}},{key:"seleciona",value:function(o){return this.get("protocoloentradas/protocoloentrada/".concat(o))}},{key:"getOptions",value:function(){return this.get("protocoloentradas/options")}}]),r}(q["a"]),P=C;function x(o,t){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),r.push.apply(r,a)}return r}function k(o){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){l()(o,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(r,t))}))}return o}var _={name:"ListaDeTipoDocumentos",components:{ListaDeRegistros:p["a"]},data:function(){return{}},computed:k({},Object(u["b"])({getRegistros:"listaDeRegistros/getRegistros"})),methods:{atualizaLista:function(o){d["a"].atualizaLista({service:P,semRegistros:[{tipoDocumentoDescricao:"Sem registros encontrados",dataDocumento:""}],self:this,done:o})}}},R=_,A=r("2877"),S=Object(A["a"])(R,s,i,!1,null,null,null),L=S.exports,j=r("b5ae"),T=function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f()(this,o),this.protocoloEntrada=t.protocoloEntrada||"",this.protocolo=t.protocolo||"",this.anoCadastro=t.anoCadastro||"",this.tipoDocumento=t.tipoDocumento||"",this.numero=t.numero||"",this.assunto=t.assunto||"",this.origem=t.origem||"",this.setor=t.setor||"",this.dataDocumento=t.dataDocumento||"",this.usuarioCriador=t.usuarioCriador||""},z=r("de64"),G=r("99b66"),N=r("540f"),B=r("fe44"),H=r("d070"),J=r("77cc");function U(o){var t=I();return function(){var r,a=y()(o);if(t){var e=y()(this).constructor;r=Reflect.construct(a,arguments,e)}else r=a.apply(this,arguments);return D()(this,r)}}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(o){return!1}}var F=function(o){v()(r,o);var t=U(r);function r(){return f()(this,r),t.apply(this,arguments)}return g()(r,null,[{key:"sugereDestino",value:function(o){return this.get("bot/protocoloentrada/destino",{params:{assunto:o}})}}]),r}(q["a"]),K=F,M={name:"Cadastro-de-ProtocoloEntradas",components:{BodyTabs:n["a"],ListaDeRegistros:L,formSelect:J["a"]},data:function(){return{protocoloEntrada:new T,tipoDocumento:new N["a"],endereco:new B["a"],setor:new H["a"],errorDescricao:"Preencha a descrição",possoAlterarProtocoloEntrada:!1,possoExcluirProtocoloEntrada:!1,optionsTipoDocumento:[],optionsEndereco:[],optionsSetor:[],optionsLoading:!1,timer:"",destino:{codigo:"",setor:""}}},validations:{protocoloEntrada:{tipoDocumento:{required:j["required"]},numero:{required:j["required"]},dataDocumento:{required:j["required"]},origem:{required:j["required"]},assunto:{required:j["required"]},setor:{required:j["required"]}}},methods:{sugereDestino:function(){var o=this;K.sugereDestino(this.protocoloEntrada.assunto).then((function(t){t.data.length&&(o.destino.setor=t.data[0].setor,o.destino.codigo=t.data[0].codigo)}))},preparaDocSemelhante:function(){this.$v.protocoloEntrada.$reset(),this.$router.push({name:"protocoloEntrada"}),this.possoAlterarProtocoloEntrada=!1,this.possoExcluirProtocoloEntrada=!1;var o=new T(this.protocoloEntrada);o.protocolo="",o.protocoloEntrada="",o.numero="",o.usuarioCriador="",o.usuarioAlterador="",this.protocoloEntrada=new T(o)},parseEnderecos:function(){return this.optionsEndereco.map((function(o){return{label:o.label,value:o.value}}))},selected:function(o){},procuraEndereco:function(o){this.$v.protocoloEntrada.origem.$touch(),console.log(o),console.log("procurando no select")},toggleRadioButton:function(){this.protocoloEntrada.status=!this.protocoloEntrada.status},reset:function(){this.$v.protocoloEntrada.$reset(),this.protocoloEntrada=new T,this.$router.push({name:"protocoloEntrada"}),this.possoAlterarProtocoloEntrada=!1,this.possoExcluirProtocoloEntrada=!1},carrega:function(o){var t=this;console.log("vou carregar o protocoloEntrada"),this.$q.loading.show({message:"Localizando o registro",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),P.seleciona(o).then((function(o){t.$q.loading.hide(),console.log("peguei o protocoloEntrada com sucesso"),t.protocoloEntrada=Object.assign({},t.protocoloEntrada,o.data),t.$root.$emit("alteraUnicoRegistro",t.protocoloEntrada),t.confereAlterarExcluir()}))},salvarAlterar:function(){var o=this;this.$q.loading.show({message:"Processando sua requisição",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),clearTimeout(this.timer),this.timer=setTimeout((function(){if(o.$v.protocoloEntrada.$touch(),o.$v.protocoloEntrada.$error)return o.$q.loading.hide(),void o.$q.dialog({title:"Atenção",message:"Alguns campos precisam ser corrigidos."});o.protocoloEntrada.protocoloEntrada&&o.possoAlterarProtocoloEntrada?(console.log("estou alterando o form"),P.altera(o.protocoloEntrada).then((function(t){o.$q.loading.hide(),console.log("protocoloEntrada alterado com sucesso");var r=o.optionsTipoDocumento.filter((function(t){return t.value===o.protocoloEntrada.tipoDocumento}));o.protocoloEntrada.tipoDocumentoDescricao=r[0].label,o.$root.$emit("alteraUnicoRegistro",o.protocoloEntrada),o.$q.notify({type:"positive",message:"Protocolo de Entrada alterado com sucesso.",timeout:5e3})}))):!o.protocoloEntrada.protocoloEntrada&&o.possoGravarProtocoloEntrada?P.grava(o.protocoloEntrada).then((function(t){console.log("protocoloEntrada criado com sucesso"),console.log(t.data),o.protocoloEntrada.protocoloEntrada=t.data.protocoloEntrada.protocoloEntrada,o.protocoloEntrada.usuarioCriador=t.data.protocoloEntrada.usuarioCriador,o.$router.push("/protocoloEntradas/protocoloEntrada/"+t.data.protocoloEntrada.protocoloEntrada),o.$q.notify({type:"positive",message:"Protocolo de Entrada criado com sucesso.",timeout:5e3});var r=o.optionsTipoDocumento.filter((function(t){return t.value===o.protocoloEntrada.tipoDocumento}));o.protocoloEntrada.tipoDocumentoDescricao=r[0].label,o.$root.$emit("adicionaRegistroNaLista",o.protocoloEntrada),o.confereAlterarExcluir()})):G["a"].semPermissao()}),2e3)},excluir:function(){var o=this;this.possoExcluirProtocoloEntrada?this.$q.dialog({title:"Tem certeza?",message:"Ao confirmar esta operação, não poderá desfazer.",ok:"Sim, excluir",cancel:"Cancelar"}).onOk((function(){o.$q.loading.show({message:"Processando sua requisição",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),P.apaga(o.protocoloEntrada.protocoloEntrada).then((function(t){o.$q.loading.hide(),console.log("protocoloEntrada removido com sucesso"),o.$q.notify({type:"negative",message:"Protocolo de Entrada removido com sucesso.",timeout:5e3}),o.$root.$emit("removeRegistro",o.protocoloEntrada.protocoloEntrada),o.reset()}))})):G["a"].semPermissao()},confereAlterarExcluir:function(){this.possoAlterarProtocoloEntrada=z["a"].alterar("protocoloEntrada",this.protocoloEntrada.usuarioCriador),this.possoExcluirProtocoloEntrada=z["a"].excluir("protocoloEntrada",this.protocoloEntrada.usuarioCriador)}},watch:{"$route.params.id":{handler:function(o){o&&this.carrega(o)},deep:!0,immediate:!0}},computed:{possoGravarProtocoloEntrada:function(){return z["a"].gravar("protocoloEntrada")}},mounted:function(){var o=this;this.optionsLoading=!0,P.getOptions().then((function(t){o.optionsLoading=!1,o.optionsTipoDocumento=o.tipoDocumento.setOptions(t.data.tipoDocumento),o.optionsEndereco=o.endereco.setOptions(t.data.endereco),o.optionsSetor=o.setor.setOptions(t.data.setor)}))}},Q=M,V=Object(A["a"])(Q,a,e,!1,null,null,null);t["default"]=V.exports}}]);