(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{5018:function(e,o,r){"use strict";r.r(o);var t=function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("div",[r("bodyTabs",{attrs:{titulo:"Cadastro de Tipos de Correspondência"}},[r("template",{slot:"tabHeader"},[r("q-tab",{attrs:{name:"tab-1",icon:"folder_shared",label:"Cadastro"}})],1),r("template",{slot:"tabPanel"},[r("q-tab-panel",{attrs:{name:"tab-1"}},[r("form",{on:{submit:function(o){return o.preventDefault(),e.salvarAlterar(o)}}},[r("div",{staticClass:"row barraBotoes"},[r("div",{staticClass:"col-md-6 linhaBotoes"},[e.possoGravarTipoCorrespondencia?r("q-btn",{attrs:{small:"",type:"reset",icon:"add"},on:{click:e.reset}},[e._v("Novo")]):e._e(),!e.tipoCorrespondencia.tipoCorrespondencia&&e.possoGravarTipoCorrespondencia?r("q-btn",{attrs:{small:"",type:"submit",icon:"save"}},[e._v("Gravar")]):e._e(),e.tipoCorrespondencia.tipoCorrespondencia&&e.possoAlterarTipoCorrespondencia?r("q-btn",{attrs:{small:"",type:"submit",icon:"save"}},[e._v("Alterar")]):e._e(),e.possoExcluirTipoCorrespondencia?r("q-btn",{attrs:{small:"",type:"button",icon:"delete"},on:{click:e.excluir}},[e._v("Excluir")]):e._e()],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("q-input",{staticClass:"form-input",attrs:{label:"Descrição",hint:"Obrigatório",error:e.$v.tipoCorrespondencia.descricao.$error,"error-message":e.errorDescricao,autocomplete:"off",type:"text",name:"descricao"},on:{input:function(o){return e.$v.tipoCorrespondencia.descricao.$touch()}},model:{value:e.tipoCorrespondencia.descricao,callback:function(o){e.$set(e.tipoCorrespondencia,"descricao",o)},expression:"tipoCorrespondencia.descricao"}})],1),r("div",{staticClass:"col-md-4"},[r("q-input",{directives:[{name:"money",rawName:"v-money",value:e.money,expression:"money"}],staticClass:"form-input",attrs:{label:"Valor",autocomplete:"off",type:"tel",name:"valor",prefix:"R$","numeric-keyboard-toggle":""},model:{value:e.tipoCorrespondencia.valor,callback:function(o){e.$set(e.tipoCorrespondencia,"valor",o)},expression:"tipoCorrespondencia.valor"}})],1),r("div",{staticClass:"col-md-4"},[r("q-field",{staticClass:"form-input",attrs:{label:"Status",borderless:"","stack-label":""}},[r("q-option-group",{attrs:{inline:"",options:[{label:"Ativo",value:1},{label:"Inativo",value:0}],color:"primary"},model:{value:e.tipoCorrespondencia.status,callback:function(o){e.$set(e.tipoCorrespondencia,"status",o)},expression:"tipoCorrespondencia.status"}})],1)],1)])])])],1)],2),r("lista-de-registros")],1)},i=[],a=(r("f751"),r("bbff")),s=function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("lista-de-registros",{ref:"listaDeRegistros",attrs:{labelHeader:"Tipos de Correspondências"},on:{atualizaLista:e.atualizaLista}},[r("template",{slot:"qItem"},e._l(e.getRegistros,(function(o,t){return r("q-item",{key:t,staticClass:"item-lista",class:t%2?"bg-blue-grey-1":"bg-blue-grey-2",attrs:{multiline:"",item:"",to:{name:"alterarTipoCorrespondencia",params:{id:o.tipoCorrespondencia}},exact:""}},[r("q-item-label",[r("q-item-section",{attrs:{header:""}},[e._v(" "+e._s(o.descricao))]),r("q-item-section",{attrs:{caption:""}},[e._v(e._s(o.codigo))])],1)],1)})),1)],2)},n=[],c=(r("8e6e"),r("8a81"),r("ac6a"),r("cadf"),r("06db"),r("456d"),r("9523")),p=r.n(c),d=r("2f62"),l=r("dbcf"),u=r("0da6"),m=(r("6b54"),r("2397"),r("970b")),C=r.n(m),f=r("5bc3"),g=r.n(f),v=r("ed6d"),h=r.n(v),b=r("6b58"),y=r.n(b),$=r("36c6"),q=r.n($),w=r("5c12");function T(e){var o=x();return function(){var r,t=q()(e);if(o){var i=q()(this).constructor;r=Reflect.construct(t,arguments,i)}else r=t.apply(this,arguments);return y()(this,r)}}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var O={procura:"/tipocorrespondencias",grava:"/tipocorrespondencias/tipocorrespondencia",cadastro:function(e){return"/tipocorrespondencias/tipocorrespondencia/".concat(e)},options:"/grupousuarios/options"},k=function(e){h()(r,e);var o=T(r);function r(){return C()(this,r),o.apply(this,arguments)}return g()(r,null,[{key:"procura",value:function(e,o,r){return this.get(O.procura,{params:{busca:e,inicio:o,fim:r}})}},{key:"grava",value:function(e){return this.post(O.grava,e)}},{key:"altera",value:function(e){return this.put(O.cadastro(e.tipoCorrespondencia),e)}},{key:"seleciona",value:function(e){return this.get(O.cadastro(e))}},{key:"apaga",value:function(e){return this.delete(O.cadastro(e))}}]),r}(w["a"]),_=k;function j(e,o){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),r.push.apply(r,t)}return r}function D(e){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?j(Object(r),!0).forEach((function(o){p()(e,o,r[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))}))}return e}var R={name:"ListaDeTipoDocumentos",components:{ListaDeRegistros:u["a"]},data:function(){return{}},computed:D({},Object(d["b"])({getRegistros:"listaDeRegistros/getRegistros"})),methods:{atualizaLista:function(e){l["a"].atualizaLista({service:_,semRegistros:[{descricao:"Sem registros encontrados",codigo:""}],self:this,done:e})}}},A=R,P=r("2877"),E=Object(P["a"])(A,s,n,!1,null,null,null),z=E.exports,L=r("b5ae"),S=r("aa8c"),G=r("b673"),B=r("de64"),N=r("99b66"),H=r("35ea"),I={name:"Cadastro-de-TipoCorrespondencias",components:{BodyTabs:a["a"],ListaDeRegistros:z},data:function(){return{tipoCorrespondencia:new S["a"],errorDescricao:"Preencha a descrição",possoAlterarTipoCorrespondencia:!1,possoExcluirTipoCorrespondencia:!1,money:{decimal:".",thousands:"",prefix:"",suffix:"",precision:2,masked:!0},timer:""}},directives:{money:H["a"]},validations:{tipoCorrespondencia:{descricao:{required:L["required"],isUnique:function(e){var o=this,r=e;if(""===r)return!0;var t="gravar",i="";this.tipoCorrespondencia.tipoCorrespondencia&&(t="alterar",i=this.tipoCorrespondencia.tipoCorrespondencia);var a=Object(G["a"])("categoriasCorrespondencias","descricao",t,i,"categoriaCorrespondencia",r).then((function(e){if(200===e.status)return!0===e.data.resposta||(o.errorDescricao="Esta descrição ja está em, escolha outra",!1)}));return a}}}},methods:{reset:function(){this.$v.tipoCorrespondencia.$reset(),this.tipoCorrespondencia=new S["a"],this.$router.push({name:"tipoCorrespondencia"}),this.possoAlterarTipoCorrespondencia=!1,this.possoExcluirTipoCorrespondencia=!1},carrega:function(e){var o=this;console.log("vou carregar o tipoCorrespondencia"),this.$q.loading.show({message:"Localizando o registro",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),_.seleciona(e).then((function(e){o.$q.loading.hide(),console.log("peguei o tipoCorrespondencia com sucesso"),o.tipoCorrespondencia=Object.assign({},o.tipoCorrespondencia,e.data),o.confereAlterarExcluir()}))},salvarAlterar:function(){var e=this;this.$q.loading.show({message:"Processando sua requisição",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),clearTimeout(this.timer),this.timer=setTimeout((function(){if(e.$v.tipoCorrespondencia.$touch(),e.$v.tipoCorrespondencia.$error)return e.$q.loading.hide(),void e.$q.dialog({title:"Atenção",message:"Alguns campos precisam ser corrigidos."});e.tipoCorrespondencia.tipoCorrespondencia&&e.possoAlterarTipoCorrespondencia?(console.log("estou alterando o form"),_.altera(e.tipoCorrespondencia).then((function(o){e.$q.loading.hide(),console.log("tipoCorrespondencia alterado com sucesso"),e.$root.$emit("alteraUnicoRegistro",e.tipoCorrespondencia),e.$q.notify({type:"positive",message:"Tipo de Correspondência alterado com sucesso.",timeout:5e3})}))):!e.tipoCorrespondencia.tipoCorrespondencia&&e.possoGravarTipoCorrespondencia?_.grava(e.tipoCorrespondencia).then((function(o){console.log("tipoCorrespondencia criado com sucesso"),e.tipoCorrespondencia.tipoCorrespondencia=o.data.tipoCorrespondencia.tipoCorrespondencia,e.tipoCorrespondencia.usuarioCriador=o.data.tipoCorrespondencia.usuarioCriador,e.$router.push("/tipoCorrespondencias/tipoCorrespondencia/"+o.data.tipoCorrespondencia.tipoCorrespondencia),e.$q.notify({type:"positive",message:"Tipo de Correspondência criado com sucesso.",timeout:5e3}),e.$root.$emit("adicionaRegistroNaLista",e.tipoCorrespondencia),e.confereAlterarExcluir()})):N["a"].semPermissao()}),2e3)},excluir:function(){var e=this;this.possoExcluirTipoCorrespondencia?this.$q.dialog({title:"Tem certeza?",message:"Ao confirmar esta operação, não poderá desfazer.",ok:"Sim, excluir",cancel:"Cancelar"}).onOk((function(){e.$q.loading.show({message:"Processando sua requisição",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),_.apaga(e.tipoCorrespondencia.tipoCorrespondencia).then((function(o){e.$q.loading.hide(),console.log("tipoCorrespondencia removido com sucesso"),e.$q.notify({type:"negative",message:"Tipo de Correspondência removido com sucesso.",timeout:5e3}),e.$root.$emit("removeRegistro",e.tipoCorrespondencia.tipoCorrespondencia),e.reset()}))})):N["a"].semPermissao()},confereAlterarExcluir:function(){this.possoAlterarTipoCorrespondencia=B["a"].alterar("tipoCorrespondencia",this.tipoCorrespondencia.usuarioCriador),this.possoExcluirTipoCorrespondencia=B["a"].excluir("tipoCorrespondencia",this.tipoCorrespondencia.usuarioCriador)}},props:{id:{}},watch:{"$route.params.id":{handler:function(e){e&&this.carrega(e)},deep:!0,immediate:!0}},computed:{possoGravarTipoCorrespondencia:function(){return B["a"].gravar("tipoCorrespondencia")}}},J=I,U=Object(P["a"])(J,t,i,!1,null,null,null);o["default"]=U.exports}}]);