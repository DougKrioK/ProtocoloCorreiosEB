(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{4513:function(a,o,t){"use strict";t.r(o);var e=function(){var a=this,o=a.$createElement,t=a._self._c||o;return t("div",[t("bodyTabs",{attrs:{titulo:"Cadastro de Tipos de Cobrança"}},[t("template",{slot:"tabHeader"},[t("q-tab",{attrs:{name:"tab-1",icon:"folder_shared",label:"Cadastro"}})],1),t("template",{slot:"tabPanel"},[t("q-tab-panel",{attrs:{name:"tab-1"}},[t("form",{on:{submit:function(o){return o.preventDefault(),a.salvarAlterar(o)}}},[t("div",{staticClass:"row barraBotoes"},[t("div",{staticClass:"col-md-6 linhaBotoes"},[a.possoGravarTipoCobranca?t("q-btn",{attrs:{small:"",type:"reset",icon:"add"},on:{click:a.reset}},[a._v("Novo")]):a._e(),!a.tipoCobranca.tipoCobranca&&a.possoGravarTipoCobranca?t("q-btn",{attrs:{small:"",type:"submit",icon:"save"}},[a._v("Gravar")]):a._e(),a.tipoCobranca.tipoCobranca&&a.possoAlterarTipoCobranca?t("q-btn",{attrs:{small:"",type:"submit",icon:"save"}},[a._v("Alterar")]):a._e(),a.possoExcluirTipoCobranca?t("q-btn",{attrs:{small:"",type:"button",icon:"delete"},on:{click:a.excluir}},[a._v("Excluir")]):a._e()],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-4"},[t("q-input",{staticClass:"form-input",attrs:{label:"Descrição",hint:"Obrigatório",error:a.$v.tipoCobranca.descricao.$error,"error-message":a.errorDescricao,autocomplete:"off",type:"text",name:"descricao"},on:{input:function(o){return a.$v.tipoCobranca.descricao.$touch()}},model:{value:a.tipoCobranca.descricao,callback:function(o){a.$set(a.tipoCobranca,"descricao",o)},expression:"tipoCobranca.descricao"}})],1),t("div",{staticClass:"col-md-4"},[t("q-input",{directives:[{name:"money",rawName:"v-money",value:a.money,expression:"money"}],staticClass:"form-input",attrs:{label:"Valor",autocomplete:"off",type:"tel",name:"valor",prefix:"R$","numeric-keyboard-toggle":""},model:{value:a.tipoCobranca.valor,callback:function(o){a.$set(a.tipoCobranca,"valor",o)},expression:"tipoCobranca.valor"}})],1),t("div",{staticClass:"col-md-4"},[t("q-field",{staticClass:"form-input",attrs:{label:"Status","stack-label":"",borderless:""}},[t("q-option-group",{attrs:{inline:"",options:[{label:"Ativo",value:1},{label:"Inativo",value:0}],color:"primary"},model:{value:a.tipoCobranca.status,callback:function(o){a.$set(a.tipoCobranca,"status",o)},expression:"tipoCobranca.status"}})],1)],1)])])])],1)],2),t("lista-de-registros")],1)},r=[],i=(t("f751"),t("bbff")),s=function(){var a=this,o=a.$createElement,t=a._self._c||o;return t("lista-de-registros",{ref:"listaDeRegistros",attrs:{labelHeader:"Tipos de Correspondências"},on:{atualizaLista:a.atualizaLista}},[t("template",{slot:"qItem"},a._l(a.getRegistros,(function(o,e){return t("q-item",{key:e,staticClass:"item-lista",class:e%2?"bg-blue-grey-1":"bg-blue-grey-2",attrs:{multiline:"",item:"",to:{name:"alterarTipoCobranca",params:{id:o.tipoCobranca}},exact:""}},[t("q-item-section",[t("q-item-label",[a._v(a._s(o.descricao))]),t("q-item-label",{attrs:{caption:""}},[a._v(a._s(o.codigo))])],1),t("q-item-section",{attrs:{side:""}},[t("q-item-label",{directives:[{name:"show",rawName:"v-show",value:o.tipoCobranca,expression:"tipoCobranca.tipoCobranca"}],attrs:{caption:""}},[a._v("R$ "+a._s(o.valor))])],1)],1)})),1)],2)},n=[],c=(t("8e6e"),t("8a81"),t("ac6a"),t("cadf"),t("06db"),t("456d"),t("9523")),l=t.n(c),p=t("2f62"),u=t("dbcf"),b=t("0da6"),d=(t("6b54"),t("2397"),t("970b")),m=t.n(d),C=t("5bc3"),f=t.n(C),v=t("ed6d"),g=t.n(v),h=t("6b58"),y=t.n(h),$=t("36c6"),q=t.n($),w=t("5c12");function T(a){var o=x();return function(){var t,e=q()(a);if(o){var r=q()(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return y()(this,t)}}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(a){return!1}}var O=function(a){g()(t,a);var o=T(t);function t(){return m()(this,t),o.apply(this,arguments)}return f()(t,null,[{key:"procura",value:function(a,o,t){return this.get("tipocobrancas",{params:{busca:a,inicio:o,fim:t}})}},{key:"grava",value:function(a){return this.post("tipocobrancas/tipocobranca",a)}},{key:"altera",value:function(a){return this.put("tipocobrancas/tipocobranca/".concat(a.tipoCobranca),a)}},{key:"apaga",value:function(a){return this.delete("tipocobrancas/tipocobranca/".concat(a))}},{key:"seleciona",value:function(a){return this.get("tipocobrancas/tipocobranca/".concat(a))}}]),t}(w["a"]),_=O;function k(a,o){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);o&&(e=e.filter((function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable}))),t.push.apply(t,e)}return t}function R(a){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?k(Object(t),!0).forEach((function(o){l()(a,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(t,o))}))}return a}var j,D={name:"ListaDeTipoCobranças",components:{ListaDeRegistros:b["a"]},data:function(){return{}},computed:R({},Object(p["b"])({getRegistros:"listaDeRegistros/getRegistros"})),methods:{atualizaLista:function(a){u["a"].atualizaLista({service:_,semRegistros:[{descricao:"Sem registros encontrados",codigo:""}],self:this,done:a})}}},A=D,P=t("2877"),E=Object(P["a"])(A,s,n,!1,null,null,null),z=E.exports,L=t("b5ae"),S=t("99ba"),G=t("b673"),B=t("de64"),N=t("99b66"),H=t("35ea"),I={name:"Cadastro-de-TipoCobrancas",components:{ListaDeRegistros:z,BodyTabs:i["a"]},data:function(){return{tipoCobranca:new S["a"],errorDescricao:"Preencha a descrição",possoAlterarTipoCobranca:!1,possoExcluirTipoCobranca:!1,money:{decimal:".",thousands:"",prefix:"",suffix:"",precision:2,masked:!0}}},directives:{money:H["a"]},validations:{tipoCobranca:{descricao:{required:L["required"],isUnique:function(a){var o=this,t=a;if(""===t)return!0;var e="gravar",r="";this.tipoCobranca.tipoCobranca&&(e="alterar",r=this.tipoCobranca.tipoCobranca);var i=Object(G["a"])("categoriasCobrancas","descricao",e,r,"categoriaCobranca",t).then((function(a){if(200===a.status)return!0===a.data.resposta||(o.errorDescricao="Esta descrição ja está em, escolha outra",!1)}));return i}}}},methods:{toggleRadioButton:function(){this.tipoCobranca.status=!this.tipoCobranca.status},reset:function(){this.$v.tipoCobranca.$reset(),this.tipoCobranca=new S["a"],this.$router.push({name:"tipoCobranca"}),this.possoAlterarTipoCobranca=!1,this.possoExcluirTipoCobranca=!1},carrega:function(a){var o=this;console.log("vou carregar o tipoCobranca"),this.$q.loading.show({message:"Localizando o registro",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),_.seleciona(a).then((function(a){o.$q.loading.hide(),console.log("peguei o tipoCobranca com sucesso"),o.tipoCobranca=Object.assign({},o.tipoCobranca,a.data),o.confereAlterarExcluir()}))},salvarAlterar:function(){var a=this;this.$q.loading.show({message:"Processando sua requisição",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),clearTimeout(j),j=setTimeout((function(){if(a.$v.tipoCobranca.$touch(),a.$v.tipoCobranca.$error)return a.$q.loading.hide(),void a.$q.dialog({title:"Atenção",message:"Alguns campos precisam ser corrigidos."});a.tipoCobranca.tipoCobranca&&a.possoAlterarTipoCobranca?(console.log("estou alterando o form"),_.altera(a.tipoCobranca).then((function(o){a.$q.loading.hide(),console.log("tipoCobranca alterado com sucesso"),a.$root.$emit("alteraUnicoRegistro",a.tipoCobranca),a.$q.notify({type:"positive",message:"Tipo de Cobrança alterado com sucesso.",timeout:5e3})}))):!a.tipoCobranca.tipoCobranca&&a.possoGravarTipoCobranca?_.grava(a.tipoCobranca).then((function(o){console.log("tipoCobranca criado com sucesso"),a.tipoCobranca.tipoCobranca=o.data.tipoCobranca.tipoCobranca,a.tipoCobranca.usuarioCriador=o.data.tipoCobranca.usuarioCriador,a.$router.push("/tipoCobrancas/tipoCobranca/"+o.data.tipoCobranca.tipoCobranca),a.$q.notify({type:"positive",message:"Tipo de Cobrança criado com sucesso.",timeout:5e3}),a.$root.$emit("adicionaRegistroNaLista",a.tipoCobranca),a.confereAlterarExcluir()})):N["a"].semPermissao()}),2e3)},excluir:function(){var a=this;this.possoExcluirTipoCobranca?this.$q.dialog({title:"Tem certeza?",message:"Ao confirmar esta operação, não poderá desfazer.",ok:"Sim, excluir",cancel:"Cancelar"}).onOk((function(){a.$q.loading.show({message:"Processando sua requisição",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),_.apaga(a.tipoCobranca.tipoCobranca).then((function(o){a.$q.loading.hide(),console.log("tipoCobranca removido com sucesso"),a.$q.notify({type:"negative",message:"Tipo de Cobrança removido com sucesso.",timeout:5e3}),a.$root.$emit("removeRegistro",a.tipoCobranca.tipoCobranca),a.reset()}))})).catch((function(){})):N["a"].semPermissao()},confereAlterarExcluir:function(){this.possoAlterarTipoCobranca=B["a"].alterar("tipoCobranca",this.tipoCobranca.usuarioCriador),this.possoExcluirTipoCobranca=B["a"].excluir("tipoCobranca",this.tipoCobranca.usuarioCriador)}},props:{id:{}},watch:{"$route.params.id":{handler:function(a){a&&this.carrega(a)},deep:!0,immediate:!0}},computed:{possoGravarTipoCobranca:function(){return B["a"].gravar("tipoCobranca")}}},J=I,U=Object(P["a"])(J,e,r,!1,null,null,null);o["default"]=U.exports}}]);