(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"8a98":function(e,o,r){"use strict";r.r(o);var t=function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("div",[r("bodyTabs",{attrs:{titulo:"Cadastro de Endereços"}},[r("template",{slot:"tabHeader"},[r("q-tab",{attrs:{name:"tab-1",icon:"folder_shared",label:"Cadastro"}})],1),r("template",{slot:"tabPanel"},[r("q-tab-panel",{attrs:{name:"tab-1"}},[r("form",{on:{submit:function(o){return o.preventDefault(),e.salvarAlterar(o)}}},[r("div",{staticClass:"row barraBotoes"},[r("div",{staticClass:"col-md-6 linhaBotoes"},[e.possoGravarEndereco?r("q-btn",{attrs:{small:"",type:"reset",icon:"add"},on:{click:e.reset}},[e._v("Novo")]):e._e(),!e.endereco.endereco&&e.possoGravarEndereco?r("q-btn",{attrs:{small:"",type:"submit",icon:"save"}},[e._v("Gravar")]):e._e(),e.endereco.endereco&&e.possoAlterarEndereco?r("q-btn",{attrs:{small:"",type:"submit",icon:"save"}},[e._v("Alterar")]):e._e(),e.possoExcluirEndereco?r("q-btn",{attrs:{small:"",type:"button",icon:"delete"},on:{click:e.excluir}},[e._v("Excluir")]):e._e()],1)]),r("q-expansion-item",{attrs:{label:"Dados Gerais","default-opened":""}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("q-input",{staticClass:"form-input",attrs:{label:"Descrição",hint:"Obrigatório",error:e.$v.endereco.descricao.$error,"error-message":e.errorDescricao,autocomplete:"off",type:"text",name:"descricao"},on:{input:function(o){return e.$v.endereco.descricao.$touch()}},model:{value:e.endereco.descricao,callback:function(o){e.$set(e.endereco,"descricao",o)},expression:"endereco.descricao"}})],1),r("div",{staticClass:"col-md-3"},[r("q-input",{staticClass:"form-input",attrs:{label:"Código",hint:"Obrigatório",error:e.$v.endereco.codigo.$error,"error-message":"Obrigatório",autocomplete:"off",type:"text",name:"codigo"},on:{input:function(o){return e.$v.endereco.codigo.$touch()}},model:{value:e.endereco.codigo,callback:function(o){e.$set(e.endereco,"codigo",o)},expression:"endereco.codigo"}})],1),r("div",{staticClass:"col-md-3"},[r("q-field",{staticClass:"form-input",attrs:{label:"Status","stack-label":"",borderless:""}},[r("q-option-group",{attrs:{inline:"",options:[{label:"Ativo",value:1},{label:"Inativo",value:0}],color:"primary"},model:{value:e.endereco.status,callback:function(o){e.$set(e.endereco,"status",o)},expression:"endereco.status"}})],1)],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-3"},[r("q-field",{staticClass:"form-input",attrs:{label:"É rota para Malote?","stack-label":"",borderless:""}},[r("q-option-group",{attrs:{inline:"",options:[{label:"Sim",value:1},{label:"Não",value:0}],color:"primary"},model:{value:e.endereco.malote,callback:function(o){e.$set(e.endereco,"malote",o)},expression:"endereco.malote"}})],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:this.endereco.malote,expression:"this.endereco.malote"}],staticClass:"col-md-3"},[r("form-select",{attrs:{classe:"form-input",hint:"Obrigatório",error:e.$v.endereco.rota.$error,"error-message":"Obrigatório",label:"Qual Rota?",options:e.optionsRota,required:""},model:{value:e.endereco.rota,callback:function(o){e.$set(e.endereco,"rota",o)},expression:"endereco.rota"}}),r("q-linear-progress",{directives:[{name:"show",rawName:"v-show",value:e.optionsLoading,expression:"optionsLoading"}],attrs:{indeterminate:""}})],1)])]),r("q-expansion-item",{attrs:{label:"Endereço","default-opened":""}},[r("div",{staticClass:"panel-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3"},[r("q-input",{directives:[{name:"mask",rawName:"v-mask",value:"99999-999",expression:"'99999-999'"}],staticClass:"form-input",attrs:{label:"Cep",autocomplete:"off",type:"text",placeholder:"00000-000",name:"cep"},on:{input:e.procuraCep},model:{value:e.endereco.cep,callback:function(o){e.$set(e.endereco,"cep",o)},expression:"endereco.cep"}})],1),r("div",{staticClass:"col-md-7"},[r("q-input",{staticClass:"form-input",attrs:{label:"Logradouro",autocomplete:"off",type:"text",name:"logradouro"},model:{value:e.endereco.logradouro,callback:function(o){e.$set(e.endereco,"logradouro",o)},expression:"endereco.logradouro"}})],1),r("div",{staticClass:"col-md-2"},[r("q-input",{staticClass:"form-input",attrs:{label:"Número",autocomplete:"off",type:"text",name:"numero"},model:{value:e.endereco.numero,callback:function(o){e.$set(e.endereco,"numero",o)},expression:"endereco.numero"}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("q-input",{staticClass:"form-input",attrs:{label:"Complemento",autocomplete:"off",type:"text",name:"complemento"},model:{value:e.endereco.complemento,callback:function(o){e.$set(e.endereco,"complemento",o)},expression:"endereco.complemento"}})],1),r("div",{staticClass:"col-md-4"},[r("q-input",{staticClass:"form-input",attrs:{label:"Referência",autocomplete:"off",type:"text",name:"referencia"},model:{value:e.endereco.referencia,callback:function(o){e.$set(e.endereco,"referencia",o)},expression:"endereco.referencia"}})],1),r("div",{staticClass:"col-md-4"},[r("q-input",{staticClass:"form-input",attrs:{label:"Bairro",autocomplete:"off",type:"text",name:"bairro"},model:{value:e.endereco.bairro,callback:function(o){e.$set(e.endereco,"bairro",o)},expression:"endereco.bairro"}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("q-input",{staticClass:"form-input",attrs:{label:"Cidade",autocomplete:"off",type:"text",name:"cidade"},model:{value:e.endereco.cidade,callback:function(o){e.$set(e.endereco,"cidade",o)},expression:"endereco.cidade"}})],1),r("div",{staticClass:"col-md-6"},[r("form-select",{attrs:{classe:"form-input",label:"Estado",hint:"Obrigatório",options:e.optionsEstados,required:""},model:{value:e.endereco.uf,callback:function(o){e.$set(e.endereco,"uf",o)},expression:"endereco.uf"}})],1)])]),r("q-inner-loading",{attrs:{visible:e.cepLoading}},[r("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1)],1)],1)])],1)],2),r("lista-de-registros")],1)},a=[],s=(r("f751"),r("bbff")),n=function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("lista-de-registros",{ref:"listaDeRegistros",attrs:{labelHeader:"Endereços"},on:{atualizaLista:e.atualizaLista}},[r("template",{slot:"qItem"},e._l(e.getRegistros,(function(o,t){return r("q-item",{key:t,staticClass:"item-lista",class:t%2?"bg-blue-grey-1":"bg-blue-grey-2",attrs:{multiline:"",item:"",to:{name:"alterarEndereco",params:{id:o.endereco}},exact:""}},[r("q-item-label",[r("q-item-section",{attrs:{header:""}},[e._v(" "+e._s(o.descricao))]),r("q-item-section",{attrs:{caption:""}},[e._v(e._s(o.codigoReduzido)+" ")])],1)],1)})),1)],2)},i=[],c=(r("8e6e"),r("8a81"),r("ac6a"),r("cadf"),r("06db"),r("456d"),r("9523")),l=r.n(c),d=r("2f62"),u=r("dbcf"),m=r("0da6"),p=r("e54c");function f(e,o){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),r.push.apply(r,t)}return r}function g(e){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?f(Object(r),!0).forEach((function(o){l()(e,o,r[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))}))}return e}var v={name:"ListaDeEnderecos",components:{ListaDeRegistros:m["a"]},data:function(){return{}},computed:g({},Object(d["b"])({getRegistros:"listaDeRegistros/getRegistros"})),methods:{atualizaLista:function(e){u["a"].atualizaLista({service:p["a"],semRegistros:[{descricao:"Sem registros encontrados",codigoReduzido:""}],self:this,done:e})}}},b=v,h=r("2877"),C=Object(h["a"])(b,n,i,!1,null,null,null),q=C.exports,$=r("b5ae"),x=r("fe44"),y=r("b673"),E=r("de64"),w=r("99b66"),O=r("a280"),k=r("8f90"),L=r("8865"),j=r.n(L),A=r("5c2b"),R=r("77cc"),_={name:"Cadastro-de-Enderecos",components:{BodyTabs:s["a"],ListaDeRegistros:q,formSelect:R["a"]},directives:{mask:j.a},data:function(){return{endereco:new x["a"],rota:new A["a"],errorDescricao:"Preencha a descrição",optionsEstados:k["a"],cepLoading:!1,possoAlterarEndereco:!1,possoExcluirEndereco:!1,optionsRota:[],optionsLoading:!1,timer:""}},validations:{endereco:{codigo:{required:$["required"]},descricao:{required:$["required"],isUnique:function(e){var o=this,r=e;if(""===r)return!0;var t="gravar",a="";this.endereco.endereco&&(t="alterar",a=this.endereco.endereco);var s=Object(y["a"])("enderecos","descricao",t,a,"endereco",r).then((function(e){if(200===e.status)return!0===e.data.resposta||(o.errorDescricao="Esta descrição ja está em, escolha outra",!1)}));return s}},rota:{required:Object($["requiredIf"])((function(e){return e.malote}))}}},methods:{procuraCep:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){9===e.endereco.cep.length&&(e.cepLoading=!0,e.endereco.logradouro="",e.endereco.bairro="",e.endereco.cidade="",e.endereco.uf="",O["a"].procura(e.endereco.cep,e.cepLoading).then((function(o){var r=o;e.endereco.logradouro=r.logradouro,e.endereco.bairro=r.bairro,e.endereco.cidade=r.localidade,e.endereco.uf=r.uf,e.cepLoading=!1})).catch((function(o){e.cepLoading=!1,console.log(o),e.$q.notify({type:"warning",message:"Cep não encontrado",timeout:2e3})})))}),300)},reset:function(){this.$v.endereco.$reset(),this.endereco=new x["a"],this.botaoSalvarAlterar="Gravar",this.$router.push({name:"endereco"}),this.possoAlterarEndereco=!1,this.possoExcluirEndereco=!1},carrega:function(e){var o=this;console.log("vou carregar o endereco"),this.$q.loading.show({message:"Localizando o registro",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),p["a"].seleciona(e).then((function(e){o.$q.loading.hide(),console.log("peguei o endereco com sucesso"),o.endereco=Object.assign({},o.endereco,e.data),o.botaoSalvarAlterar="Alterar",o.confereAlterarExcluir()}))},salvarAlterar:function(){var e=this;this.$q.loading.show({message:"Processando sua requisição",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),clearTimeout(this.timer),this.timer=setTimeout((function(){if(e.$v.endereco.$touch(),e.$v.endereco.$error)return e.$q.loading.hide(),void e.$q.dialog({title:"Atenção",message:"Alguns campos precisam ser corrigidos."});e.endereco.endereco&&e.possoAlterarEndereco?(console.log("estou alterando o form"),p["a"].altera(e.endereco).then((function(o){e.$q.loading.hide(),console.log("endereco alterado com sucesso"),e.$root.$emit("alteraUnicoRegistro",e.endereco),e.$q.notify({type:"positive",message:"Endereco alterado com sucesso.",timeout:5e3})}))):!e.endereco.endereco&&e.possoGravarEndereco?p["a"].grava(e.endereco).then((function(o){console.log("endereco criado com sucesso"),e.endereco.endereco=o.data.endereco.endereco,e.endereco.usuarioCriador=o.data.endereco.usuarioCriador,e.$router.push("/enderecos/endereco/"+o.data.endereco.endereco),e.$q.notify({type:"positive",message:"Endereco criado com sucesso.",timeout:5e3}),e.$root.$emit("adicionaRegistroNaLista",e.endereco),e.confereAlterarExcluir()})):w["a"].semPermissao()}),2e3)},excluir:function(){var e=this;this.possoExcluirEndereco?this.$q.dialog({title:"Tem certeza?",message:"Ao confirmar esta operação, não poderá desfazer.",ok:"Sim, excluir",cancel:"Cancelar"}).onOk((function(){e.$q.loading.show({message:"Processando sua requisição",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),p["a"].apaga(e.endereco.endereco).then((function(o){e.$q.loading.hide(),console.log("endereco removido com sucesso"),e.$q.notify({type:"negative",message:"Endereco removido com sucesso.",timeout:5e3}),e.$root.$emit("removeRegistro",e.endereco.endereco),e.reset()}))})):w["a"].semPermissao()},confereAlterarExcluir:function(){this.possoAlterarEndereco=E["a"].alterar("endereco",this.endereco.usuarioCriador),this.possoExcluirEndereco=E["a"].excluir("endereco",this.endereco.usuarioCriador)}},props:{id:{}},watch:{"$route.params.id":{handler:function(e){e&&this.carrega(e)},deep:!0,immediate:!0}},computed:{possoGravarEndereco:function(){return E["a"].gravar("endereco")}},mounted:function(){var e=this;this.optionsLoading=!0,p["a"].getOptions().then((function(o){e.optionsLoading=!1,e.optionsRota=e.rota.setOptions(o.data.rotas)}))}},D=_,P=Object(h["a"])(D,t,a,!1,null,null,null);o["default"]=P.exports}}]);