(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{9618:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("bodyTabs",{attrs:{titulo:"Cadastro de Setores Internos"}},[r("template",{slot:"tabHeader"},[r("q-tab",{attrs:{name:"tab-1",icon:"folder_shared",label:"Cadastro"}})],1),r("template",{slot:"tabPanel"},[r("q-tab-panel",{attrs:{name:"tab-1"}},[r("form",{on:{submit:function(t){return t.preventDefault(),e.salvarAlterar(t)}}},[r("div",{staticClass:"row barraBotoes"},[r("div",{staticClass:"col-md-6 linhaBotoes"},[e.possoGravarSetor?r("q-btn",{attrs:{small:"",type:"reset",icon:"add"},on:{click:e.reset}},[e._v("Novo")]):e._e(),!e.setor.setor&&e.possoGravarSetor?r("q-btn",{attrs:{small:"",type:"submit",icon:"save"}},[e._v("Gravar")]):e._e(),e.setor.setor&&e.possoAlterarSetor?r("q-btn",{attrs:{small:"",type:"submit",icon:"save"}},[e._v("Alterar")]):e._e(),e.possoExcluirSetor?r("q-btn",{attrs:{small:"",type:"button",icon:"delete"},on:{click:e.excluir}},[e._v("Excluir")]):e._e()],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("q-input",{staticClass:"form-input",attrs:{label:"Descrição",hint:"Obrigatório",error:e.$v.setor.descricao.$error,"error-message":e.errorDescricao,autocomplete:"off",type:"text",name:"descricao"},on:{input:function(t){return e.$v.setor.descricao.$touch()}},model:{value:e.setor.descricao,callback:function(t){e.$set(e.setor,"descricao",t)},expression:"setor.descricao"}})],1),r("div",{staticClass:"col-md-3"},[r("q-input",{staticClass:"form-input",attrs:{label:"Código",hint:"Obrigatório",error:e.$v.setor.codigo.$error,"error-message":"Obrigatório",autocomplete:"off",type:"text",name:"codigo"},on:{input:function(t){return e.$v.setor.codigo.$touch()}},model:{value:e.setor.codigo,callback:function(t){e.$set(e.setor,"codigo",t)},expression:"setor.codigo"}})],1),r("div",{staticClass:"col-md-3"},[r("q-field",{staticClass:"form-input",attrs:{label:"Status","stack-label":"",borderless:""}},[r("q-option-group",{attrs:{inline:"",options:[{label:"Ativo",value:1},{label:"Inativo",value:0}],color:"primary"},model:{value:e.setor.status,callback:function(t){e.$set(e.setor,"status",t)},expression:"setor.status"}})],1)],1)])])])],1)],2),r("lista-de-registros")],1)},s=[],a=(r("f751"),r("bbff")),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("lista-de-registros",{ref:"listaDeRegistros",attrs:{labelHeader:"Setores"},on:{atualizaLista:e.atualizaLista}},[r("template",{slot:"qItem"},e._l(e.getRegistros,(function(t,o){return r("q-item",{key:o,staticClass:"item-lista",class:o%2?"bg-blue-grey-1":"bg-blue-grey-2",attrs:{multiline:"",item:"",to:{name:"alterarSetor",params:{id:t.setor}},exact:""}},[r("q-item-section",[r("q-item-label",[e._v(" "+e._s(t.descricao))]),r("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.codigoReduzido)+" ")])],1)],1)})),1)],2)},n=[],c=(r("8e6e"),r("8a81"),r("ac6a"),r("cadf"),r("06db"),r("456d"),r("9523")),l=r.n(c),u=r("2f62"),d=r("dbcf"),m=r("0da6"),p=(r("6b54"),r("2397"),r("970b")),f=r.n(p),g=r("5bc3"),v=r.n(g),h=r("ed6d"),b=r.n(h),y=r("6b58"),$=r.n(y),q=r("36c6"),S=r.n(q),w=r("5c12");function O(e){var t=C();return function(){var r,o=S()(e);if(t){var s=S()(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return $()(this,r)}}function C(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var x={setor:"/setores",grava:"/setores/setor",cadastro:function(e){return"/setores/setor/".concat(e)}},R=function(e){b()(r,e);var t=O(r);function r(){return f()(this,r),t.apply(this,arguments)}return v()(r,null,[{key:"procura",value:function(e,t,r){return this.get(x.setor,{params:{busca:e,inicio:t,fim:r}})}},{key:"grava",value:function(e){return this.post(x.grava,e)}},{key:"seleciona",value:function(e){return this.get(x.cadastro(e))}},{key:"altera",value:function(e){return this.put(x.cadastro(e.setor),e)}},{key:"apaga",value:function(e){return this.delete(x.cadastro(e))}}]),r}(w["a"]),_=R;function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D={name:"ListaSetores",components:{ListaDeRegistros:m["a"]},data:function(){return{}},computed:k({},Object(u["b"])({getRegistros:"listaDeRegistros/getRegistros"})),methods:{atualizaLista:function(e){d["a"].atualizaLista({service:_,semRegistros:[{descricao:"Sem registros encontrados",codigoReduzido:""}],self:this,done:e})}}},A=D,P=r("2877"),E=Object(P["a"])(A,i,n,!1,null,null,null),z=E.exports,L=r("b5ae"),G=r("d070"),T=r("b673"),B=r("de64"),I=r("99b66"),H={name:"Cadastro-de-Setores",components:{ListaDeRegistros:z,BodyTabs:a["a"]},data:function(){return{setor:new G["a"],errorDescricao:"Preencha a descrição",possoAlterarSetor:!1,possoExcluirSetor:!1,timer:""}},validations:{setor:{codigo:{required:L["required"]},descricao:{required:L["required"],isUnique:function(e){var t=this,r=e;if(""===r)return!0;var o="gravar",s="";this.setor.setor&&(o="alterar",s=this.setor.setor);var a=Object(T["a"])("categoriasDocumentos","descricao",o,s,"categoriaDocumento",r).then((function(e){if(200===e.status)return!0===e.data.resposta||(t.errorDescricao="Esta descrição ja está em, escolha outra",!1)}));return a}}}},methods:{toggleRadioButton:function(){this.setor.status=!this.setor.status},reset:function(){this.$v.setor.$reset(),this.setor=new G["a"],this.$router.push({name:"setor"}),this.possoAlterarSetor=!1,this.possoExcluirSetor=!1},carrega:function(e){var t=this;console.log("vou carregar o setor"),this.$q.loading.show({message:"Localizando o registro",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),_.seleciona(e).then((function(e){t.$q.loading.hide(),console.log("peguei o setor com sucesso"),t.setor=Object.assign({},t.setor,e.data),t.confereAlterarExcluir()}))},salvarAlterar:function(){var e=this;this.$q.loading.show({message:"Processando sua requisição",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),clearTimeout(this.timer),this.timer=setTimeout((function(){if(e.$v.setor.$touch(),e.$v.setor.$error)return e.$q.loading.hide(),void e.$q.dialog({title:"Atenção",message:"Alguns campos precisam ser corrigidos."});e.setor.setor&&e.possoAlterarSetor?(console.log("estou alterando o form"),_.altera(e.setor).then((function(t){e.$q.loading.hide(),console.log("setor alterado com sucesso"),e.$root.$emit("alteraUnicoRegistro",e.setor),e.$q.notify({type:"positive",message:"Setor alterado com sucesso.",timeout:5e3})}))):!e.setor.setor&&e.possoGravarSetor?_.grava(e.setor).then((function(t){console.log("setor criado com sucesso"),e.setor.setor=t.data.setor.setor,e.setor.usuarioCriador=t.data.setor.usuarioCriador,e.$router.push("/setores/setor/"+t.data.setor.setor),e.$q.notify({type:"positive",message:"Setor criado com sucesso.",timeout:5e3}),e.$root.$emit("adicionaRegistroNaLista",e.setor),e.confereAlterarExcluir()})):I["a"].semPermissao()}),2e3)},excluir:function(){var e=this;this.possoExcluirSetor?this.$q.dialog({title:"Tem certeza?",message:"Ao confirmar esta operação, não poderá desfazer.",ok:"Sim, excluir",cancel:"Cancelar"}).onOk((function(){e.$q.loading.show({message:"Processando sua requisição",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),_.apaga(e.setor.setor).then((function(t){e.$q.loading.hide(),console.log("setor removido com sucesso"),e.$q.notify({type:"negative",message:"Setor removido com sucesso.",timeout:5e3}),e.$root.$emit("removeRegistro",e.setor.setor),e.reset()}))})):I["a"].semPermissao()},confereAlterarExcluir:function(){this.possoAlterarSetor=B["a"].alterar("setor",this.setor.usuarioCriador),this.possoExcluirSetor=B["a"].excluir("setor",this.setor.usuarioCriador)}},props:{id:{}},watch:{"$route.params.id":{handler:function(e){e&&this.carrega(e)},deep:!0,immediate:!0}},computed:{possoGravarSetor:function(){return B["a"].gravar("setor")}}},J=H,N=Object(P["a"])(J,o,s,!1,null,null,null);t["default"]=N.exports}}]);