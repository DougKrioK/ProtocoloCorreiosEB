(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"23e7":function(e,o,a){},"63a7":function(e,o,a){"use strict";var t=a("23e7"),s=a.n(t);s.a},"76da":function(e,o,a){"use strict";a.r(o);var t,s=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("q-layout",[a("q-page-container",[a("q-page",[a("q-toolbar",[a("q-toolbar-title",{staticClass:"text-center"},[a("img",{attrs:{src:e.imageSrc,alt:""}}),a("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[a("div",{staticClass:"q-headline"},[e._v("\n              SISPROT - SISTEMA DE PROTOCOLO DA 1ª REGIÃO MILITAR\n            ")])])])],1),a("consulta-correspondencia")],1)],1),a("q-layout-footer",[a("q-toolbar",[a("q-toolbar-title",{staticClass:"text-center"},[e._v("\n        Copyright © 2019 - Exército Brasileiro - 1ª Região Militar.\n        "),a("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[a("div",{staticClass:"q-subheading"},[e._v("\n            Desenvolvido por ST Moreira\n          ")])])])],1)],1)],1)},r=[],i=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("q-page",{staticClass:"q-pa-sm full-height"},[a("form",{on:{submit:function(o){return o.preventDefault(),e.procurar(o)}}},[a("div",{staticClass:"row barraBotoes"},[a("div",{staticClass:"col-md-6 linhaBotoes"},[a("q-btn",{attrs:{small:"",type:"submit",icon:"search"}},[e._v("Procurar")]),a("q-btn",{attrs:{small:"",type:"button",icon:"print"},on:{click:e.gerarRelatorio}},[e._v("Gerar Relatório")])],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("q-field",{staticClass:"form-input",attrs:{label:"Mês do cadastro",orientation:"vertical",helper:"Obrigatório",error:e.$v.buscaCorrespondencia.mes.$error,"error-label":"Obrigatório"}},[a("q-select",{attrs:{options:e.optionsMes,filter:"","autofocus-filter":"","filter-placeholder":"Selecione o mês",name:"select"},model:{value:e.buscaCorrespondencia.mes,callback:function(o){e.$set(e.buscaCorrespondencia,"mes",o)},expression:"buscaCorrespondencia.mes"}})],1)],1),a("div",{staticClass:"col-md-4"},[a("q-field",{staticClass:"form-input",attrs:{label:"Ano",orientation:"vertical",helper:"Obrigatório",error:e.$v.buscaCorrespondencia.mes.$error,"error-label":"Obrigatório"}},[a("q-select",{attrs:{options:e.optionsAno,filter:"","autofocus-filter":"","filter-placeholder":"Selecione o ano",name:"select"},model:{value:e.buscaCorrespondencia.ano,callback:function(o){e.$set(e.buscaCorrespondencia,"ano",o)},expression:"buscaCorrespondencia.ano"}})],1)],1),a("div",{staticClass:"col-md-4"},[a("q-field",{staticClass:"form-input",attrs:{label:"Origem",orientation:"vertical",helper:"Obrigatório",error:e.$v.buscaCorrespondencia.setor.$error,"error-label":"Obrigatório"}},[a("q-select",{attrs:{options:e.optionsSetor,filter:"","autofocus-filter":"","filter-placeholder":"Selecione o setor",name:"select"},model:{value:e.buscaCorrespondencia.setor,callback:function(o){e.$set(e.buscaCorrespondencia,"setor",o)},expression:"buscaCorrespondencia.setor"}})],1)],1)])]),a("br"),a("div",[a("q-table",{attrs:{title:"Registro de Postagem",data:e.registros,columns:e.tabelaColunas,"row-key":"correspondencia",loading:e.carregandoLista,separator:e.tabelaSeparador,"no-data-label":"Sem registros encontrados","no-results-label":"Sem registros encontrados","rows-per-page-label":"Linhas por página","loading-label":"Carregando","rows-per-page-options":[50,100,200,0],"visible-columns":e.colunasVisiveis},scopedSlots:e._u([{key:"top-right",fn:function(o){return[a("q-table-columns",{staticClass:"q-mr-sm",attrs:{color:"secondary",columns:e.tabelaColunas,label:"Colunas"},model:{value:e.colunasVisiveis,callback:function(o){e.colunasVisiveis=o},expression:"colunasVisiveis"}}),a("q-select",{attrs:{color:"secondary",options:[{label:"Horizontal",value:"horizontal"},{label:"Vertical",value:"vertical"},{label:"Célula",value:"cell"},{label:"Nenhum",value:"none"}],"hide-underline":""},model:{value:e.tabelaSeparador,callback:function(o){e.tabelaSeparador=o},expression:"tabelaSeparador"}}),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:o.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:o.toggleFullscreen}})]}}])},[a("template",{slot:"top-left"},[a("q-search",{staticClass:"col-6",attrs:{placeholder:"Busca","hide-underline":"",color:"secondary"},model:{value:e.registros,callback:function(o){e.registros=o},expression:"registros"}})],1)],2)],1),a("q-modal",{ref:"modalRelatorio",attrs:{maximized:""},model:{value:e.modalRelatorio,callback:function(o){e.modalRelatorio=o},expression:"modalRelatorio"}},[a("q-modal-layout",{attrs:{"header-style":"min-height: 100px","content-class":"{'bg-primary': isPrimary, 'some-class': someBoolean}","footer-class":"bg-primary some-class","footer-style":"{fontSize: '24px', fontWeight: 'bold'}"}},[a("q-toolbar",{staticClass:"primary"},[a("q-btn",{attrs:{flat:""},on:{click:function(o){e.modalRelatorio=!1}}},[a("q-icon",{attrs:{name:"keyboard_arrow_left"}})],1),a("div",{staticClass:"q-toolbar-title"},[e._v("\n          Relatório\n        ")])],1),a("iframe",{staticClass:"full-width full-height",attrs:{src:e.linkRelatorio,frameborder:"0",allowfullscreen:""}})],1)],1)],1)},l=[],n=(a("b54a"),a("b5ae")),c=a("54aa"),u=a("1593"),d=a("d070"),p={name:"ConsultaCorrespondencia",data:function(){return{modalRelatorio:!1,linkRelatorio:"",setor:new d["a"],optionsLoading:!1,optionsSetor:[],busca:"",buscaCorrespondencia:new c["a"],carregandoLista:!1,registros:[],tipoConsulta:"documento",tabelaSeparador:"horizontal",colunasVisiveis:(new c["a"]).setColunasVisiveisControleDeRegistroDePostagem(),optionsMes:[{label:"Janeiro",value:"01"},{label:"Fevereiro",value:"02"},{label:"Março",value:"03"},{label:"Abril",value:"04"},{label:"Maio",value:"05"},{label:"Junho",value:"06"},{label:"Julho",value:"07"},{label:"Agosto",value:"08"},{label:"Setembro",value:"09"},{label:"Outubro",value:"10"},{label:"Novembro",value:"11"},{label:"Dezembro",value:"12"}],optionsAno:[],tabelaColunas:[{name:"protocolo",required:!0,label:"Prot.",align:"left",field:"protocolo",sortable:!0},{name:"origem",label:"Origem - Remetente",align:"left",field:"origemRemetente",sortable:!0},{name:"tipoCorrespondencia",label:"Tipo de Cor.",align:"left",field:"tipoCorrespondencia",sortable:!0},{name:"cep",label:"CEP",align:"left",field:"cep",sortable:!0},{name:"codigoRastreio",label:"Rastreio",align:"left",field:"codigoRastreio",sortable:!0},{name:"tipoDocumento",required:!0,label:"Tipo Doc.",align:"left",field:"tipoDocumento",sortable:!0},{name:"numeroDocumento",label:"Nº",align:"left",field:"numeroDocumento"}]}},validations:{buscaCorrespondencia:{ano:{required:n["required"]},mes:{required:n["required"]},setor:{required:n["required"]}}},methods:{setOptionsAno:function(e){if(e.length>0){var o=[];e.map((function(e){return o.push({label:"".concat(e.ano),value:"".concat(e.ano)})})),this.optionsAno=o}else this.optionsAno=[{label:"Sem registros cadastrados, confira o cadastro de Correspondencias",value:""}]},procurar:function(){var e=this;if(this.$v.buscaCorrespondencia.$touch(),this.$v.buscaCorrespondencia.$error)return this.$q.loading.hide(),void this.$q.dialog({title:"Atenção",message:"Alguns campos precisam ser corrigidos."}).then((function(){})).catch((function(){}));this.buscaCorrespondencia.mesCadastro="".concat(this.buscaCorrespondencia.ano,"-").concat(this.buscaCorrespondencia.mes),this.$q.loading.show({message:"Processando sua requisição",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),clearTimeout(t),t=setTimeout((function(){u["a"].procuraDocumentoPublico(e.buscaCorrespondencia).then((function(o){e.$q.loading.hide(),console.log("buscaCorrespondencia alterado com sucesso"),console.log(o.data),e.registros=o.data.correspondencias,e.valorTotal=o.data.valorTotal,e.$q.notify({type:"positive",message:"Este é o resultado da sua consulta.",timeout:5e3})}))}),2e3)},gerarRelatorio:function(){var e=this;if(this.$v.buscaCorrespondencia.$touch(),this.$v.buscaCorrespondencia.$error)return this.$q.loading.hide(),void this.$q.dialog({title:"Atenção",message:"Alguns campos precisam ser corrigidos."}).then((function(){})).catch((function(){}));this.$q.loading.show({message:"Processando sua requisição",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),this.buscaCorrespondencia.mesCadastro="".concat(this.buscaCorrespondencia.ano,"-").concat(this.buscaCorrespondencia.mes),clearTimeout(t),t=setTimeout((function(){u["a"].relatorioPublico(e.buscaCorrespondencia).then((function(o){e.$q.loading.hide(),console.log("buscaCorrespondencia alterado com sucesso"),console.log(o.data),e.linkRelatorio=o.data.link,e.modalRelatorio=!0,e.$q.notify({type:"positive",message:"Este é o resultado da sua consulta.",timeout:5e3})}))}),2e3)},preencheListaTabela:function(e){var o=[];e.forEach((function(e){o.push({id:e.buscaCorrespondencia,tipoDocumento:e.tipoDocumentoDescricao,numero:e.numero,origem:e.setorDescricao,destino:e.codigoReduzido})})),this.listaDeCorrespondencias=o}},mounted:function(){var e=this;u["a"].getOptionsPublico().then((function(o){e.optionsLoading=!1,e.optionsSetor=e.setor.setOptions(o.data.setor),e.setOptionsAno(o.data.anos)}))}},b=p,m=(a("63a7"),a("2877")),f=Object(m["a"])(b,i,l,!1,null,"b81e5578",null),g=f.exports,h={name:"ConsultaCorrespondencia",components:{consultaCorrespondencia:g},data:function(){return{imageSrc:"statics/logo.png",loadingVisible:!1}},validations:{},methods:{},computed:{}},v=h,C=(a("da8c"),Object(m["a"])(v,s,r,!1,null,"4f2e423a",null));o["default"]=C.exports},b03d:function(e,o,a){},da8c:function(e,o,a){"use strict";var t=a("b03d"),s=a.n(t);s.a}}]);