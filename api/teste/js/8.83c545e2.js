(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{cbd7:function(o,t,a){"use strict";a.r(t);var r=function(){var o=this,t=o.$createElement,a=o._self._c||t;return a("q-layout",{ref:"layout",staticClass:"full-height",attrs:{view:"lHr lpR lFr"}},[a("q-page-container",[a("q-page",[a("bodyTabs",{attrs:{titulo:"Protocolo de Entrada",menuDireita:!1,menuEsquerda:!1}},[a("template",{slot:"tabHeader"},[a("q-tab",{attrs:{name:"tab-1",icon:"folder_shared",label:"Cadastro"}})],1),a("template",{slot:"tabPanel"},[a("q-tab-panel",{attrs:{name:"tab-1"}},[a("form",{on:{submit:function(t){return t.preventDefault(),o.salvarAlterar(t)}}},[a("div",{staticClass:"row barraBotoes"},[a("div",{staticClass:"col-md-6 linhaBotoes"},[!o.protocoloEntrada.protocoloEntrada&&o.possoGravarProtocoloEntrada?a("q-btn",{attrs:{small:"",type:"submit",icon:"save"}},[o._v("Gravar")]):o._e(),o.protocoloEntrada.protocoloEntrada&&o.possoAlterarProtocoloEntrada?a("q-btn",{attrs:{small:"",type:"submit",icon:"save"}},[o._v("Alterar")]):o._e()],1)]),a("div",{staticClass:"col-md-12"},[a("q-field",{staticClass:"form-input",attrs:{label:"Nº","stack-label":""}},[o._v("\n                  "+o._s(o.protocoloEntrada.anoCadastro+"-"+o.protocoloEntrada.protocolo)+"\n                ")])],1),a("div",{staticClass:"col-md-12"},[a("q-field",{staticClass:"form-input",attrs:{label:"Importação","stack-label":""}}),a("div",{staticClass:"form-input row"},[o._v("Tipo: "+o._s(o.tipoDocumentoDescricao))]),a("div",{staticClass:"form-input row"},[o._v("Data: "+o._s(o.dataFormatada))]),a("div",{staticClass:"form-input row"},[o._v("Origem: "+o._s(o.protocoloEntrada.origem))]),a("div",{staticClass:"form-input row"},[o._v("Número: "+o._s(o.protocoloEntrada.numero))]),a("div",{staticClass:"form-input row"},[o._v("\n                  Assunto: "+o._s(o.protocoloEntrada.assunto)+"\n                ")])],1),a("div",{staticClass:"col-md-12"},[a("form-select",{staticClass:"form-input",attrs:{error:o.$v.protocoloEntrada.setor.$error,"error-message":"Obrigatório",hint:"Obrigatório",classe:"form-input",label:"Destino",options:o.optionsSetor,required:""},on:{input:function(t){return o.$v.protocoloEntrada.setor.$touch()}},model:{value:o.protocoloEntrada.setor,callback:function(t){o.$set(o.protocoloEntrada,"setor",t)},expression:"protocoloEntrada.setor"}}),a("q-linear-progress",{directives:[{name:"show",rawName:"v-show",value:o.optionsLoading,expression:"optionsLoading"}],attrs:{indeterminate:""}})],1)])])],1)],2)],1)],1)],1)},n=[],e=(a("f751"),a("bbff")),s=a("5a0c"),i=a.n(s),c=a("b5ae"),l=a("0670"),d=a("932a"),u=a("de64"),p=a("d070"),m=a("540f"),E=a("77cc"),h=a("514b"),f={name:"ProtocoloEntradas-Extensao",components:{BodyTabs:e["a"],formSelect:E["a"]},data:function(){return{botDestino:"",timer:"",json:"",protocoloEntrada:new l["a"],setor:new p["a"],tipoDocumento:new m["a"],errorDescricao:"Preencha a descrição",possoAlterarProtocoloEntrada:!1,possoExcluirProtocoloEntrada:!1,optionsSetor:[],optionsTipoDocumento:[],optionsLoading:!1}},validations:{protocoloEntrada:{tipoDocumento:{required:c["required"]},numero:{required:c["required"]},dataDocumento:{required:c["required"]},origem:{required:c["required"]},assunto:{required:c["required"]},setor:{required:c["required"]}}},methods:{sugereDestino:function(o){var t=this;h["a"].sugereDestino(o).then((function(o){o.data.length&&(t.protocoloEntrada.setor=o.data[0].setor,t.botDestino=o.data[0].setor+o.data[0].codigo,console.log("BOT DESTINO",t.protocoloEntrada))}))},preencheJson:function(){var o="";try{o=JSON.parse(this.json)}catch(t){return!1}this.protocoloEntrada.assunto=o.assunto,this.sugereDestino(o.assunto),this.protocoloEntrada.dataDocumento=o.dataDocumento,this.protocoloEntrada.numero=o.numero,this.protocoloEntrada.origem=o.origem,this.protocoloEntrada.tipoDocumento=o.tipoDocumento},reset:function(){this.$v.protocoloEntrada.$reset(),this.protocoloEntrada=new l["a"],this.json="",this.possoAlterarProtocoloEntrada=!1,this.possoExcluirProtocoloEntrada=!1},salvarAlterar:function(){var o=this;this.$q.loading.show({message:"Processando sua requisição",messageColor:"white",spinnerSize:250,spinnerColor:"white"}),clearTimeout(this.timer),this.timer=setTimeout((function(){if(o.$v.protocoloEntrada.$touch(),o.$v.protocoloEntrada.$error)return o.$q.loading.hide(),o.$q.dialog({title:"Atenção",message:"Alguns campos precisam ser corrigidos."}).then((function(){})).catch((function(){})),console.log("validador ",o.$v.protocoloEntrada),void console.log("this.pro ",o.protocoloEntrada);d["a"].grava(o.protocoloEntrada).then((function(t){console.log("protocoloEntrada criado com sucesso"),console.log(t.data),d["a"].seleciona(t.data.protocoloEntrada.protocoloEntrada).then((function(t){o.$q.loading.hide(),o.protocoloEntrada=Object.assign({},o.protocoloEntrada,t.data),o.$q.notify({type:"positive",message:"Protocolo de Entrada criado com sucesso.",timeout:5e3}),o.confereAlterarExcluir()}))}))}),2e3)},confereAlterarExcluir:function(){this.possoAlterarProtocoloEntrada=u["a"].alterar("protocoloEntrada",this.protocoloEntrada.usuarioCriador),this.possoExcluirProtocoloEntrada=u["a"].excluir("protocoloEntrada",this.protocoloEntrada.usuarioCriador)}},computed:{possoGravarProtocoloEntrada:function(){return u["a"].gravar("protocoloEntrada")},dataFormatada:function(){return""!==this.protocoloEntrada.dataDocumento?i()(this.protocoloEntrada.dataDocumento).format("DD/MM/YYYY"):""},tipoDocumentoDescricao:function(){var o=this,t=this.optionsTipoDocumento.filter((function(t){return t.value===o.protocoloEntrada.tipoDocumento}));return console.log(t),0!==t.length?t[0].label:""}},created:function(){var o=this;this.optionsLoading=!0,d["a"].getOptions().then((function(t){o.optionsLoading=!1,o.optionsTipoDocumento=o.tipoDocumento.setOptions(t.data.tipoDocumento),o.optionsSetor=o.setor.setOptions(t.data.setor)}))},mounted:function(){var o=this;this.$chrome.storage.sync.get(["protocoloEntrada"],(function(t){console.log("result ",t),console.log("result.protocoloEntrada ",t.protocoloEntrada),o.protocoloEntrada.assunto=t.protocoloEntrada.assunto,o.sugereDestino(t.protocoloEntrada.assunto),o.protocoloEntrada.dataDocumento=t.protocoloEntrada.dataDocumento,o.protocoloEntrada.numero=t.protocoloEntrada.numero,o.protocoloEntrada.origem=t.protocoloEntrada.origem,o.protocoloEntrada.tipoDocumento=t.protocoloEntrada.tipoDocumento,console.log("this.protocoloEntrada ",o.protocoloEntrada),o.json=JSON.stringify(t.protocoloEntrada)}))}},g=f,v=a("2877"),D=Object(v["a"])(g,r,n,!1,null,null,null);t["default"]=D.exports}}]);